##DET-001 Administration

####Component diagram
![Admin component diagram](https://raw.github.com/massiveart/sulu-docs/master/detail-specification/images/admin_diagram.png)

####General
#####Serverside
The AdminPool-Service holds all Admin-classes provided by other bundles. These Admin-classes are derived from a abstract Admin-class provided by the SuluAdminBundle. The concrete Admin-classes are defined as services with a specific tag ("sulu.admin"). This is needed because a CompilerPass called by the SuluAdminBundle-class uses this tag for registering the Admin-classes in the AdminPool-Service.

The Admin-classes contains the required information for displaying the navigation in SULU.

#####Clientside
Sulu uses RequireJS to load all the required JavaScript code. With this tool it is very easy to load only the required parts of the bundles.

Therefore a [backbone router](http://backbonejs.org/#Router) is used, which is responsible for calling the right actions on the right URLs resp. Hashtags.
On the initialization of the router all the routes from the other packages are also loaded. This is done with requiring a JavaScript File generated by a serverside controller.
This serverside controller iterates over all the registered admins from the AdminPool-Service. With this information it requires all the bundle's main.js-file located in `Resource/public/js`.
That is also the entry point for the bundle, where it can be initialized (adding all the required routes to the router, ...).

####Navigation
#####Mainnavigation
The first part of the navigation is immediataley created and passed to the javascript (on the first request). This includes the navigation items to all endpoints of the registered bundles.

#####Subnavigation
Every Navigation Item can have a action-attribute, to which a request is sent, when the user selectes this item. The action should be an URL, delivering a navigation JSON on a GET-Reqeuest. This part is also handled by each bundle itself.

#####Contentnavigation
The last column of the navigation is the so called content navigation, displaying multiple sub forms of a resource. You could also describe it as tabs, altough they are not located on top.
The bundle can decide on its own where this navigation comes from. If you don't need any serverside information you could just return a navigation Object. In case you don't have all the information available you can also make an AJAX-Request, and use this JSON as the input.
This data is delivered to the navigation with an triggered event.

###### Server Side
Similar to the architecture of the Main Navigation, the ContentNavigation service holds all the NavigationItems provided by other bundles with a tagged service. The abstract class ContentNavigation is implemented by the bundle which has a content-navigation. This same bundle instantiates the ContentNavigationPass, which collects all tagged ContentNavigationInterface services from other bundles.
The bundle then should return the navigation object with a NavigationController to the application.

####Commands
The admin has also to return an array with instances from all commands offered by this bundle. It is needed to register the commands in the `app/console`-command of Sulu.

####Security Contexts
Another thing the bundle/admin has to return is the security contexts it is offering. The bundle uses these contexts to check if the logged in user has the permission to execute the desired operation. 
